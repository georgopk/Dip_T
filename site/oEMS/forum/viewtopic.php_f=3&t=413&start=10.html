<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Regarding materials, box priorities, and mesh coordinates - Page 2 - openEMS.de</title>


	<link rel="canonical" href="http://openems.de/forum/viewtopic.php?t=413&amp;start=10">

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="assets/css/font-awesome.min.css%3Fassets_version=3.css" rel="stylesheet">
<link href="styles/prosilver/theme/stylesheet.css%3Fassets_version=3.css" rel="stylesheet">
<link href="styles/prosilver/theme/en/stylesheet.css%3Fassets_version=3.css" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/prosilver/theme/tweaks.css?assets_version=3" rel="stylesheet">
<![endif]-->





</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
				<a id="logo" class="logo" href="index.php.html" title="Board index"><span class="site_logo"></span></a>
				<h1>openEMS.de</h1>
				<p>OpenEMS Support Forum</p>
				<p class="skiplink"><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#start_here">Skip to content</a></p>
			</div>

									<div id="search-box" class="search-box search-header" role="search">
				<form action="http://openems.de/forum/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="http://openems.de/forum/search.php" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</div>
						
			</div>
					</div>
				<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="http://openems.de/forum/search.php?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="http://openems.de/forum/search.php?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="http://openems.de/forum/search.php" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
																			<li>
								<a href="memberlist.php%3Fmode=team.html" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

									</ul>
			</div>
		</li>

				<li data-skip-responsive="true">
			<a href="http://openems.de/forum/app.php/help/faq" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp.php%3Fmode=login.html" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="ucp.php%3Fmode=register.html" role="menuitem">
					<i class="icon fa-pencil-square-o  fa-fw" aria-hidden="true"></i><span>Register</span>
				</a>
			</li>
						</ul>

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
						<li class="breadcrumbs">
										<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index.php.html" itemprop="url" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="title">Board index</span></a></span>

											<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="1"><a href="viewforum.php%3Ff=1.html" itemprop="url"><span itemprop="title">openEMS Support</span></a></span>
															<span class="crumb"  itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum.php%3Ff=3.html" itemprop="url"><span itemprop="title">Usage</span></a></span>
												</li>
		
					<li class="rightside responsive-search">
				<a href="http://openems.de/forum/search.php" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
			</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		
<h2 class="topic-title"><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html">Regarding materials, box priorities, and mesh coordinates</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">How to use openEMS. Discussion on examples, tutorials etc<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a>
</p>


<div class="action-bar bar-top">
	
			<a href="http://openems.de/forum/posting.php?mode=reply&amp;f=3&amp;t=413" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="http://openems.de/forum/viewtopic.php?f=3&amp;t=413&amp;start=10&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="http://openems.de/forum/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="http://openems.de/forum/search.php" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="413" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			20 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopic.php%3Ff=3&amp;t=413.html" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopic.php%3Ff=3&amp;t=413.html" role="button">1</a></li>
			<li class="active"><span>2</span></li>
	</ul>
					</div>
		</div>




			<div id="p2762" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2762">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=54&amp;sr=posts">1221</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 27 Jun 2011, 12:26</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2762">

						<h3 class="first"><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2762">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2762" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2762#p2762" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a></strong> &raquo; </span>Tue 09 May 2017, 20:46
			</p>
			
			
			
			<div class="content">Hi,<br>
<br>
you feed in Matlab variables as strings, how should that work? <br>
"horn.width" and "max_epsilon" and so on have to appear as numbers in this equations. The only allowed variables are x,y,z,rho,a,r !<br>
<br>
Something like this should do it:
<div class="codebox"><p>Code: <a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#" onclick="selectCode(this); return false;">Select all</a></p><pre><code> CSX = SetMaterialWeight(CSX, 'metamaterial', 'Epsilon', [ '1+(max ([exp(abs(x))/' num2str(exp(horn.width)*max_epsilon) ')' ] ); </code></pre></div>

I think you also want this anisotropic too?<br>
In this case you need to create a { , , } array with each string for x/y/z...<br>
and:
<div class="codebox"><p>Code: <a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>CSX = AddMaterial( CSX, 'metamaterial', 'Isotropy', 0);
CSX = SetMaterialProperty(CSX, 'metamaterial', 'Epsilon', [1 1 1]);
</code></pre></div>

br<br>
Thorsten</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2763" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2763">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=451.html" class="username">D.Daniel</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=451&amp;sr=posts">2</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed 10 May 2017, 13:36</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2763">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2763">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2763" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2763#p2763" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=451.html" class="username">D.Daniel</a></strong> &raquo; </span>Thu 11 May 2017, 21:18
			</p>
			
			
			
			<div class="content">Hi Thorsten,<br>
<br>
We have a discrete material property distribution to characterize a highly heterogeneous medium. Do you know a way in openEMS to apply a spatially dependent epsilon and kappa that do not conform to a closed-form mathematical function?<br>
<br>
Many thanks!<br>
-Dave</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2764" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2764">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=54&amp;sr=posts">1221</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 27 Jun 2011, 12:26</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2764">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2764">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2764" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2764#p2764" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a></strong> &raquo; </span>Thu 11 May 2017, 21:36
			</p>
			
			
			
			<div class="content">Hi,<br>
<br>
openEMS does support e.g. human body models etc. stored as an 3D material array in a hdf5 file.<br>
<br>
See here: <a href="https://github.com/thliebig/CSXCAD/blob/master/matlab/AddDiscMaterial.m" class="postlink">https://github.com/thliebig/CSXCAD/blob ... Material.m</a> <br>
<br>
But of course a special format or data layout to that file has to be used.<br>
A Matlab function for this purpose exists too: <a href="https://github.com/thliebig/CSXCAD/blob/master/matlab/CreateDiscMaterial.m" class="postlink">https://github.com/thliebig/CSXCAD/blob ... Material.m</a><br>
Unfortunately it only runs on Matlab (not Octave). But if you do not have Matlab, python would be possible too, but there is no method yet for it. But should you create one I would be very interested in it.<br>
<br>
Does that help?<br>
<br>
br<br>
Thorsten</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2813" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2813">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=435&amp;sr=posts">14</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 13 Feb 2017, 19:11</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2813">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2813">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2813" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2813#p2813" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a></strong> &raquo; </span>Fri 02 Jun 2017, 17:06
			</p>
			
			
			
			<div class="content">Hello Thorsen,<br>
<br>
Your proposal<br>
<br>
CSX = SetMaterialWeight(CSX, 'metamaterial', 'Epsilon', [ '1+(max ([exp(abs(x))/' num2str(exp(horn.width)*max_epsilon) ')' ] );<br>
<br>
Didn't work (I think I'm doing OK). I think there is a bracket missing to close the max vector. In any case what I'm having troubles to this function to accept is the maximum of of x,y,z (plus one). <br>
<br>
Sort of<br>
<br>
CSX = SetMaterialWeight(CSX, 'metamaterial', 'Epsilon', [ '1+(max ([x,y,y]) ' ] );<br>
<br>
How would you write that? I tried different complex arguments and ended up realizing that "SetMaterialWeight" might not like the max function?<br>
<br>
Cheers<br>
<br>
German</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2814" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2814">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=54&amp;sr=posts">1221</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 27 Jun 2011, 12:26</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2814">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2814">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2814" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2814#p2814" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a></strong> &raquo; </span>Fri 02 Jun 2017, 19:53
			</p>
			
			
			
			<div class="content">Hi,<br>
<br>
square brackets are surely not a proper function, please remember this has to be a mathematical expression not a matlab function.<br>
I think 'max(a,b)' with <em class="text-italics">a</em> and <em class="text-italics">b</em> being a number or one of the predefined variables (<em class="text-italics">x,y,z,r,rho,a</em>) .<br>
But at the end of the day you will need to continue using trial and error. Use the --debug-material flag to see in Paraview how the material distribution was determined.<br>
<br>
regards<br>
Thorsten</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2828" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2828">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=435&amp;sr=posts">14</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 13 Feb 2017, 19:11</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2828">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2828">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2828" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2828#p2828" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a></strong> &raquo; </span>Tue 13 Jun 2017, 13:43
			</p>
			
			
			
			<div class="content">Hello Thorsen,<br>
<br>
I hope you are good.<br>
<br>
SetMaterialWeight is giving me a lot of help/fun with my non-uniform dielectrics, however I cannot make it to work when there is a num2str within the function.<br>
<br>
Have you ever tried this ? <br>
Any example that worked for you in the past?<br>
<br>
Thanks, Thorsen,<br>
<br>
German</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2830" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2830">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=54&amp;sr=posts">1221</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 27 Jun 2011, 12:26</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2830">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2830">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2830" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2830#p2830" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a></strong> &raquo; </span>Wed 14 Jun 2017, 20:58
			</p>
			
			
			
			<div class="content">I'm not sure I understand what you mean? <em class="text-italics">num2str</em> is a Matlab/Octave function to convert a Matlab variable into a string as openEMS of course needs a well formed string only...</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2832" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2832">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=435&amp;sr=posts">14</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 13 Feb 2017, 19:11</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2832">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2832">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2832" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2832#p2832" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a></strong> &raquo; </span>Thu 15 Jun 2017, 14:53
			</p>
			
			
			
			<div class="content">Hi Thorsen,<br>
<br>
Thanks for your answer<br>
My fault probably. I'm trying to use num2str within a well-formed string, e.g. <br>
the one you suggested above in this thread.<br>
<br>
It doesn't seem to work.<br>
<br>
But don't bother with that one anyway (it has a max that seems to not work either). I have traced my problems (maybe my inexperience) to any expression having a num2str function as a part of a function inside a "SetMaterialProperty"  expression (which is great stuff).<br>
<br>
e.g. <br>
-----<br>
<br>
mxeps_x = 10<br>
mxeps_y = 20<br>
<br>
start=[-a/2 -b/2 -horn.feed_length];<br>
stop =[a/2 b/2 0];<br>
CSX = AddMaterial(CSX, 'metamaterial');<br>
CSX = SetMaterialProperty(CSX, 'metamaterial', 'Epsilon', 1);<br>
CSX = SetMaterialWeight(CSX, 'metamaterial', 'Epsilon', ['1+sqrt(num2str(mxeps_x)*(1-exp(-((((x)/20))^2)/2)))^2+(num2str(mxeps_y)*(1-exp(-((((y)/20))^2)/2)))^2)* 2.5 *exp(-(((z+50)/7)^2)/2)']);<br>
CSX = AddBox(CSX, 'metamaterial' ,3 , start, stop); <br>
<br>
-------<br>
<br>
I have debugged this to even simpler functions but still using num2str as a way to bring a variable other than x,y,z into the SetMaterialWeight function.<br>
Does this make sense to you now? (my apologies again)<br>
<br>
Did this use of num2str work for you in the past? <br>
Any other option to bring a variable other than x,y,z into SetMaterialWeight, if this is no a correct use?<br>
<br>
Thanks for the patience.<br>
<br>
Best Regards<br>
<br>
German</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2833" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile2833">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=54&amp;sr=posts">1221</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 27 Jun 2011, 12:26</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2833">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2833">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2833" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2833#p2833" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=54.html" class="username">thorsten</a></strong> &raquo; </span>Thu 15 Jun 2017, 18:59
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>'1+sqrt(num2str(mxeps_x)*(1-exp(-((((x)/20))^2)/2)))^2+( ... </div></blockquote>

This does create a string with "num2str" in it. That does make no sense to openEMS.<br>
You have to use this function in matlab to convert variables, not pass it as a string to openEMS.<br>
<br>
E.g. like this:
<div class="codebox"><p>Code: <a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>['1+sqrt(' num2str(mxeps_x) '*(1-exp(-((((x)/20))^2)/2)))^2+(' .. ]
</code></pre></div>
Note how I use the [] brackets to concatenate multiple string (with extra ' ) to one longer string ...<br>
<br>
regards<br>
Thorsten</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p2834" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile2834">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="http://openems.de/forum/search.php?author_id=435&amp;sr=posts">14</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon 13 Feb 2017, 19:11</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content2834">

						<h3 ><a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#p2834">Re: Regarding materials, box priorities, and mesh coordinate</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="http://openems.de/forum/posting.php?mode=quote&amp;f=3&amp;p=2834" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="http://openems.de/forum/viewtopic.php?p=2834#p2834" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist.php%3Fmode=viewprofile&amp;u=435.html" class="username">Garias</a></strong> &raquo; </span>Thu 15 Jun 2017, 23:57
			</p>
			
			
			
			<div class="content">Thanks, Thorsten,<br>
<br>
Great stuff,<br>
<br>
Actually, I have to recur to "strcat" to concatenate strings and variables into the SetMaterialWeight function.<br>
<br>
<br>
CSX = SetMaterialWeight(CSX, 'metamaterial', 'Epsilon', [strcat('1+sqrt((' , num2str(mxeps_x) , '*(1-exp(-((((x)/20))^2)/2)))^2+(' , num2str(mxeps_y) , '*(1-exp(-((((y)/20))^2)/2)))^2)*2.5/sqrt(6.28)*exp(-(((z+50)/7)^2)/2)')]);<br>
<br>
It might be me (quite likely) or perhaps Octave doesn't like your syntax, which doesn't invoke "strcat" to concatenate. Perhaps an abbreviated concatenation syntax which Octave doesn't like?<br>
<br>
I keep enjoying OpenEMS  <img class="smilies" src="http://openems.de/forum/images/smilies/icon_e_biggrin.gif" width="15" height="17" alt=":D" title="Very Happy"> <br>
<br>
Thanks for your directions to the proper use of this function.<br>
<br>
Best Regards<br>
<br>
German</div>

			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="http://openems.de/forum/posting.php?mode=reply&amp;f=3&amp;t=413" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="http://openems.de/forum/viewtopic.php?f=3&amp;t=413&amp;start=10&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			20 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopic.php%3Ff=3&amp;t=413.html" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopic.php%3Ff=3&amp;t=413.html" role="button">1</a></li>
			<li class="active"><span>2</span></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum.php%3Ff=3.html" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Usage”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforum.php%3Ff=1.html" class="jumpbox-cat-link"> <span> openEMS Support</span></a></li>
																<li><a href="viewforum.php%3Ff=5.html" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; News</span></a></li>
																<li><a href="viewforum.php%3Ff=2.html" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Install</span></a></li>
																<li><a href="viewforum.php%3Ff=3.html" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Usage</span></a></li>
																<li><a href="viewforum.php%3Ff=4.html" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Feedback</span></a></li>
																<li><a href="viewforum.php%3Ff=6.html" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Development</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index.php.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC+2">UTC+02:00</span></li>
							<li class="rightside">
				<a href="http://openems.de/forum/ucp.php?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
												<li class="rightside" data-last-responsive="true">
				<a href="memberlist.php%3Fmode=team.html" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
									<li class="rightside" data-last-responsive="true">
				<a href="memberlist.php%3Fmode=contactadmin.html" role="menuitem">
					<i class="icon fa-envelope fa-fw" aria-hidden="true"></i><span>Contact us</span>
				</a>
			</li>
			</ul>

	</div>
</div>

	<div class="copyright">
				<p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp.php%3Fmode=privacy.html" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp.php%3Fmode=terms.html" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="viewtopic.php%3Ff=3&amp;t=413&amp;start=10.html#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script type="text/javascript" src="assets/javascript/jquery.min.js%3Fassets_version=3"></script>
<script type="text/javascript" src="assets/javascript/core.js%3Fassets_version=3"></script>



<script src="styles/prosilver/template/forum_fn.js%3Fassets_version=3"></script>
<script src="styles/prosilver/template/ajax.js%3Fassets_version=3"></script>



</body>
</html>
